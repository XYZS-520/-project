<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x.icon">
    <link rel="stylesheet" href="../css/public.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/identical.css">
    <link rel="stylesheet" href="css/zhuce.css">
</head>

<body>
    <div class="topper">
        <div class="wrapper">
            <div class="fl">全国鲜花速递,鲜花预订行业领导品牌！全国送花客服热线：010-60777792/18511870338</div>
            <div class="fr">
                <ul class="topper-links">
                    <li class="user"><a href="">登录</a>&ensp;<a href="zhuce.html">[注册]</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="header-sp">
        <div class="wrapper">
            <a class="logo" href="../index.html"
                style="background-image: url('https://www.xinyixianhua.com/resource/img/logo2.png')">心意鲜花网</a>
            <span class="title">全国鲜花速递平台</span>
        </div>
    </div>
    <div class="main">
        <div class="wrapper">
            <div class="weizhi">
                <div class="logintitle">
                    <a href="denglv.html" class="item">登录</a>
                    <a href="zhuce.html" class="item active">注册</a>
                </div>
                <div class="loginmain">
                    <form class="box">
                        <div class="name">
                            <i>用户名&nbsp;</i><input type="text" id="user" required=true class="user"><br>
                        </div>
                        <div class="passwod">
                            密&nbsp;码&nbsp;<input type="password" id="pass" class="pass"><br>
                        </div>
                        <div class="passwod2">
                            确&nbsp;认&nbsp;<input type="password" id="pass2" class="pass2" equalTo="#pass"><br>
                        </div>
                        <input type="submit" value="注册" id="btn" class="btn">
                        <span></span>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="../js/jquery.js"></script>
<!-- <script src="js/jquery.validate.js"></script>
<script src="js/jquery.validate.messages_zh.js"></script>
<script>
    $('form').validate()
</script> -->
<script>

    class Register {
        constructor() {
            this.user = document.getElementById("user")
            this.pass = document.getElementById("pass")
            this.btn = document.getElementById("btn")
            this.span = document.querySelector(".box span")

            this.addEvent()
        }
        addEvent() {
            var that = this;
            this.btn.onclick = function () {
                that.setLocal()
            }
        }
        setLocal() {
            // 之前有没有
            this.userMsg = localStorage.getItem("userMsg");
            this.userMsg = this.userMsg ? JSON.parse(this.userMsg) : [];

            // 之前没有，直接存
            if (this.userMsg.length < 1) {
                this.userMsg.push({
                    user: this.user.value,
                    pass: this.pass.value,
                    onoff: 0
                })
            } else {
                // 之前有，判断是否重名
                var o = this.userMsg.some(val => {
                    return val.user === this.user.value;
                })
                if (o) {
                    this.span.innerHTML = "重名";
                } else {
                    this.span.innerHTML = "";
                    this.userMsg.push({
                        user: this.user.value,
                        pass: this.pass.value,
                        onoff: 0
                    }) 
                }
            }

            localStorage.setItem("userMsg", JSON.stringify(this.userMsg))
        }
    }

    new Register();

</script>

</html>